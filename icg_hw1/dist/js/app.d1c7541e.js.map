{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/shaders/phong.vert","webpack:///./src/components/SceneObjectList.vue?8c72","webpack:///./src/ts/camera.ts","webpack:///./src/js/webgl-utils.js","webpack:///./src/ts/transform.ts","webpack:///./src/shaders/goraud.vert","webpack:///./src/components/ObjectComponent.vue?2fc9","webpack:///./src/assets/texture/debug.png","webpack:///./src/shaders/custom.vert","webpack:///./src/assets/texture/debug_yellow.png","webpack:///./src/ts/shaderProgram.ts","webpack:///./src/shaders sync ^\\.\\/.*\\.vert$","webpack:///./src/shaders/goraud.frag","webpack:///./src/components/ObjectComponent.vue?a042","webpack:///./src/assets/model sync ^\\.\\/.*\\.json$","webpack:///./src/shaders/shadow.vert","webpack:///./src/shaders/flat.vert","webpack:///./src/ts/light.ts","webpack:///./src/shaders/shadow.frag","webpack:///./src/assets/texture sync ^\\.\\/.*$","webpack:///./src/components/ObjectComponent.vue?ecbd","webpack:///./src/assets/texture/debug_white.png","webpack:///./src/shaders/cel.frag","webpack:///./src/shaders/flat.frag","webpack:///./src/components/SceneObjectList.vue?4a7b","webpack:///./src/shaders/custom.frag","webpack:///./src/ts/modelObject.ts","webpack:///./src/main.ts","webpack:///./src/components/SceneObjectList.vue","webpack:///./src/components/ObjectComponent.vue","webpack:///./src/components/ObjectComponent.vue?19fa","webpack:///./src/components/ObjectComponent.vue?e545","webpack:///./src/components/SceneObjectList.vue?f54b","webpack:///./src/components/SceneObjectList.vue?a028","webpack:///./src/shaders/phong.frag","webpack:///./src/components/SceneObjectList.vue?c6d2","webpack:///./src/shaders/cel.vert","webpack:///./src/shaders sync ^\\.\\/.*\\.frag$"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","___CSS_LOADER_API_IMPORT___","Camera","viewport","FOV","viewportWidth","width","viewportHeight","height","undefined","perspective","this","pMatrix","fromRotationTranslation","mvMatrix","rotation","position","invert","invT_mvMatrix","transpose","getMVP","WebGLUtils","makeFailHTML","msg","GET_A_WEBGL_BROWSER","OTHER_PROBLEM","setupWebGL","canvas","opt_attribs","opt_onError","handleCreationError","container","parentNode","str","WebGLRenderingContext","innerHTML","addEventListener","event","statusMessage","context","create3DContext","names","ii","getContext","e","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","Transform","zero","fromValues","scale","x","y","z","add","fromEuler","rotateX","rotateY","rotateZ","axis","multiply","setAxisAngle","getEuler","out","quat","w","x2","y2","z2","w2","unit","test","Math","PI","atan2","asin","forEach","val","degToRad","degrees","LightUniforms","idx","shaderProgram","enabled","gl","getUniformLocation","la","ld","ls","attenuation","TextureUniforms","texture","BasicShader","shader_name","getShader","initShaders","vert_shader","createShader","VERTEX_SHADER","shader_src","default","shaderSource","compileShader","frag_shader","FRAGMENT_SHADER","getShaderParameter","COMPILE_STATUS","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getShaderInfoLog","useProgram","vertexPositionAttribute","getAttribLocation","enableVertexAttribArray","vertexFrontColorAttribute","vertexNormalAttribute","vertexUVAttribute","textureUniform","pMatrixUniform","mvMatrixUniform","invT_mvMatrixUniform","modelMatrixUniform","invT_modelMatrixUniform","lightUniforms","glossUniform","camPosUniform","depthTexUniform","depthMatrix","is_loaded","camPos","uniform3fv","mvp","uniformMatrix4fv","depthTextureSize","texture_buffer","uniform1i","activeTexture","TEXTURE1","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_INT","lights","light","uniform1f","map","webpackContext","req","id","webpackContextResolve","Error","code","keys","resolve","PhongLight","Shadow","view","createDepthBuffer","bindFramebuffer","FRAMEBUFFER","depthFramebuffer","setPosRot","mat","fromMat4","targetTo","fromMat3","mul","depthTexture","createTexture","DEPTH_COMPONENT","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","unusedTexture","UNSIGNED_BYTE","LINEAR","createFramebuffer","framebufferTexture2D","DEPTH_ATTACHMENT","COLOR_ATTACHMENT0","content","locals","ModelObject","WebGLBuffer","shader","model_name","texture_name","loadModel","loadTexture","vertexAttributes","handleModelData","image","Image","onload","textures","console","log","src","buffer","vertexBuffers","buf","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","itemSize","numItems","isLoaded","setUniform","vertexPositions","vertexAttribPointer","FLOAT","vertexFrontcolors","vertexNormals","vertexTextureCoords","drawArrays","TRIANGLES","shear_mat","shear","fromQuat","fromTranslation","gloss","TEXTURE0","REPEAT","Uint8Array","disableVertexAttribArray","webGLStart","onresize","setCanvasSize","shadow","shadow_shader","teapotAngle","lastTime","document","createElement","initGlobalVariables","global","scene_objects","shader_programs","elapsed_time","camera","texture_list","innerWidth","innerHeight","style","backgroundColor","top","left","initGL","setPos","setDiffuse","setAttenuation","setAmbient","setSpecular","setScale","setRot","setGloss","vm","mount","clearColor","enable","DEPTH_TEST","body","appendChild","tick","getExtension","update","drawShadow","getMatrix","entries","prog","setDepthMatrixUniforms","draw","updateTime","cos","sin","shaders","disable","CULL_FACE","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","world_mat","setMVP","setWorldMatrixUniforms","setLightUniforms","setCamPosUniform","obj","setFrameBuffer","timeNow","Date","getTime","class","selected","size","selected_default","is_selected","pos","index","xyz","rot","euler","rot_changed","selected_shader","_","is_texture","selected_texture","valueOf","with","render","components","ObjectComponent"],"mappings":"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","file":"js/app.d1c7541e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default \"attribute vec3 aVertexPosition;\\r\\nattribute vec3 aFrontColor;\\r\\nattribute vec3 aNormal;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\nuniform mat4 uinvTMVMatrix;\\r\\nuniform mat4 uinvTModelMatrix;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\n\\r\\nvoid main(void) {\\r\\n    fragcolor = aFrontColor;\\r\\n    // pos = aVertexPosition;\\r\\n    pos = (uModelMatrix * vec4(aVertexPosition, 1)).xyz;\\r\\n    // normal = normalize(aNormal);\\r\\n    vNormal = ((uinvTModelMatrix * vec4(aNormal, 0.0)).xyz);\\r\\n\\r\\n    gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);\\r\\n}\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".panel{position:fixed;top:50%;font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-align:left;margin-top:10px;width:100%;height:50%;font-size:18px;display:flex}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { mat4, vec3, quat } from 'gl-matrix'\r\nimport { Transform, degToRad } from './transform'\r\n\r\nclass Camera extends Transform {\r\n    viewportWidth: number;\r\n    viewportHeight: number;\r\n    FOV = degToRad(60);\r\n\r\n    mvMatrix: mat4 = mat4.create();\r\n    pMatrix: mat4 = mat4.create();\r\n    invT_mvMatrix: mat4 = mat4.create();\r\n\r\n    constructor (viewport: {width: number, height: number}, FOV?: number) {\r\n      super()\r\n      this.viewportWidth = viewport.width\r\n      this.viewportHeight = viewport.height\r\n      if(FOV !== undefined) this.FOV = degToRad(FOV)\r\n    }\r\n\r\n    setMVP () {\r\n      // Setup Projection Matrix\r\n      mat4.perspective(this.pMatrix, this.FOV, this.viewportWidth / this.viewportHeight, 0.5, 100.0)\r\n      // let width = 15;\r\n      // mat4.ortho(this.pMatrix, -width*this.viewportWidth / this.viewportHeight, width*this.viewportWidth / this.viewportHeight, -width, width, 0.1, 300.0)\r\n\r\n      // Setup Model-View Matrix\r\n      mat4.fromRotationTranslation(this.mvMatrix, this.rotation, this.position)\r\n      mat4.invert(this.mvMatrix, this.mvMatrix)\r\n\r\n      mat4.invert(this.invT_mvMatrix, this.mvMatrix)\r\n      mat4.transpose(this.invT_mvMatrix, this.invT_mvMatrix)\r\n      return this.getMVP()\r\n    }\r\n\r\n    getMVP () {\r\n      return {\r\n        pMatrix: this.pMatrix,\r\n        mvMatrix: this.mvMatrix,\r\n        invT_mvMatrix: this.invT_mvMatrix\r\n      }\r\n    }\r\n}\r\n\r\nexport {\r\n  Camera\r\n}\r\n","/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\n\r\nWebGLUtils = (function () {\r\n/**\r\n * Creates the HTLM for a failure message\r\n * @param {string} canvasContainerId id of container of th\r\n *        canvas.\r\n * @return {string} The html.\r\n */\r\n  var makeFailHTML = function (msg) {\r\n    return '' +\r\n    '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n    '<td align=\"center\">' +\r\n    '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n    '<div style=\"\">' + msg + '</div>' +\r\n    '</div>' +\r\n    '</td></tr></table>'\r\n  }\r\n\r\n  /**\r\n * Mesasge for getting a webgl browser\r\n * @type {string}\r\n */\r\n  var GET_A_WEBGL_BROWSER = '' +\r\n  'This page requires a browser that supports WebGL.<br/>' +\r\n  '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>'\r\n\r\n  /**\r\n * Mesasge for need better hardware\r\n * @type {string}\r\n */\r\n  var OTHER_PROBLEM = '' +\r\n  \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n  '<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>'\r\n\r\n  /**\r\n * Creates a webgl context. If creation fails it will\r\n * change the contents of the container of the <canvas>\r\n * tag to an error message with the correct links for WebGL.\r\n * @param {Element} canvas. The canvas element to create a\r\n *     context from.\r\n * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n *     creation attributes you want to pass in.\r\n * @param {function:(msg)} opt_onError An function to call\r\n *     if there is an error during creation.\r\n * @return {WebGLRenderingContext} The created context.\r\n */\r\n  var setupWebGL = function (canvas, opt_attribs, opt_onError) {\r\n    function handleCreationError (msg) {\r\n      var container = canvas.parentNode\r\n      if (container) {\r\n        var str = window.WebGLRenderingContext\r\n          ? OTHER_PROBLEM\r\n          : GET_A_WEBGL_BROWSER\r\n        if (msg) {\r\n          str += '<br/><br/>Status: ' + msg\r\n        }\r\n        container.innerHTML = makeFailHTML(str)\r\n      }\r\n    }\r\n\r\n    opt_onError = opt_onError || handleCreationError\r\n\r\n    if (canvas.addEventListener) {\r\n      canvas.addEventListener('webglcontextcreationerror', function (event) {\r\n        opt_onError(event.statusMessage)\r\n      }, false)\r\n    }\r\n    var context = create3DContext(canvas, opt_attribs)\r\n    if (!context) {\r\n      if (!window.WebGLRenderingContext) {\r\n        opt_onError('')\r\n      }\r\n    }\r\n    return context\r\n  }\r\n\r\n  /**\r\n * Creates a webgl context.\r\n * @param {!Canvas} canvas The canvas tag to get context\r\n *     from. If one is not passed in one will be created.\r\n * @return {!WebGLContext} The created context.\r\n */\r\n  var create3DContext = function (canvas, opt_attribs) {\r\n    var names = ['webgl', 'experimental-webgl', 'webkit-3d', 'moz-webgl']\r\n    var context = null\r\n    for (var ii = 0; ii < names.length; ++ii) {\r\n      try {\r\n        context = canvas.getContext(names[ii], opt_attribs)\r\n      } catch (e) {}\r\n      if (context) {\r\n        break\r\n      }\r\n    }\r\n    return context\r\n  }\r\n\r\n  return {\r\n    create3DContext: create3DContext,\r\n    setupWebGL: setupWebGL\r\n  }\r\n}())\r\n\r\n/**\r\n * Provides requestAnimationFrame in a cross browser way.\r\n */\r\nwindow.requestAnimFrame = (function () {\r\n  return window.requestAnimationFrame ||\r\n         window.webkitRequestAnimationFrame ||\r\n         window.mozRequestAnimationFrame ||\r\n         window.oRequestAnimationFrame ||\r\n         window.msRequestAnimationFrame ||\r\n         function (/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\r\n           window.setTimeout(callback, 1000 / 60)\r\n         }\r\n})()\r\n","import { mat4, vec3, quat } from 'gl-matrix'\r\ndeclare let gl: WebGLRenderingContext\r\n\r\nclass Transform {\r\n    position: vec3 = vec3.zero(vec3.create());\r\n    rotation: quat = quat.create();\r\n    scale: vec3 = vec3.fromValues(1, 1, 1);\r\n\r\n    constructor () {}\r\n\r\n    setScale (s: number): Transform { vec3.scale(this.scale, this.scale, s); return this }\r\n    setScaleXYZ (x: number, y: number, z: number): Transform { this.scale = vec3.fromValues(x, y, z); return this }\r\n\r\n    setPos (x: number, y: number, z: number): Transform { this.position = vec3.fromValues(x, y, z); return this }\r\n    translate (x: number, y: number, z: number): Transform { vec3.add(this.position, this.position, vec3.fromValues(x, y, z)); return this }\r\n\r\n    setRot (x: number, y: number, z: number): Transform { this.rotation = quat.fromEuler(quat.create(), x, y, z); return this }\r\n    rotateX (r: number): Transform { quat.rotateX(this.rotation, this.rotation, r); return this }\r\n    rotateY (r: number): Transform { quat.rotateY(this.rotation, this.rotation, r); return this }\r\n    rotateZ (r: number): Transform { quat.rotateZ(this.rotation, this.rotation, r); return this }\r\n    rotateAxis (r: number, axis: vec3): Transform { quat.multiply(this.rotation, this.rotation, quat.setAxisAngle(quat.create(), axis, r)); return this }\r\n}\r\n\r\nexport function getEuler(out, quat) {\r\n  let x = quat[0],\r\n    y = quat[1],\r\n    z = quat[2],\r\n    w = quat[3],\r\n    x2 = x * x,\r\n    y2 = y * y,\r\n    z2 = z * z,\r\n    w2 = w * w;\r\n  let unit = x2 + y2 + z2 + w2;\r\n  let test = x * w - y * z;\r\n  if (test > 0.499995 * unit) { //TODO: Use glmatrix.EPSILON\r\n    // singularity at the north pole\r\n    out[0] = Math.PI / 2;\r\n    out[1] = 2 * Math.atan2(y, x);\r\n    out[2] = 0;\r\n  } else if (test < -0.499995 * unit) { //TODO: Use glmatrix.EPSILON\r\n    // singularity at the south pole\r\n    out[0] = -Math.PI / 2;\r\n    out[1] = 2 * Math.atan2(y, x);\r\n    out[2] = 0;\r\n  } else {\r\n    out[0] = Math.asin(2 * (x * z - w * y));\r\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\r\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\r\n  }\r\n  // TODO: Return them as degrees and not as radians\r\n  \r\n  out.forEach((val, i) => {\r\n    out[i] = (val/Math.PI*180)\r\n  })\r\n  return out;\r\n}\r\n\r\nfunction degToRad(degrees) {\r\n  return degrees * Math.PI / 180;\r\n}\r\n\r\n\r\nexport {\r\n  Transform,\r\n  degToRad\r\n}\r\n","export default \"attribute vec3 aVertexPosition;\\r\\nattribute vec3 aFrontColor;\\r\\nattribute vec3 aNormal;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\nuniform mat4 uinvTModelMatrix;\\r\\n\\r\\nstruct Light {\\r\\n    bool enabled;\\r\\n    vec3 position;\\r\\n    vec3 la; // Ambient\\r\\n    vec3 ld; // Diffuse\\r\\n    vec3 ls; // Specular\\r\\n    float attenuation;\\r\\n};\\r\\n\\r\\nuniform float gloss;\\r\\nuniform Light lights[4];\\r\\nuniform vec3 uCamPos;\\r\\n\\r\\nvec3 normal;\\r\\nvec3 pos;\\r\\nvec3 viewDir;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\n\\r\\nvoid shading() {\\r\\n    vec3 light_color = vec3(0);\\r\\n    vec3 spec_color = vec3(0);\\r\\n    fragcolor = vec3(0);\\r\\n    for(int i = 0; i < 4; ++i){\\r\\n        if(!lights[i].enabled){\\r\\n            break;\\r\\n        }\\r\\n        vec3 lightDir = (lights[i].position - pos);\\r\\n        float atten = distance(lightDir, vec3(0));\\r\\n        atten = pow(max(.1, lights[i].attenuation-atten)/lights[i].attenuation, 2.);\\r\\n        lightDir = normalize(lightDir);\\r\\n\\r\\n        float dif = dot(normal, lightDir)*atten;\\r\\n        light_color += (lights[i].la + dif * lights[i].ld);\\r\\n        \\r\\n        vec3 halfDir = normalize(viewDir + lightDir);\\r\\n        float spec = pow(max(dot(normal, halfDir), 0.), gloss)*atten;\\r\\n        spec_color += (lights[i].ls * spec);\\r\\n    }\\r\\n    fragcolor = light_color * aFrontColor + spec_color;\\r\\n}\\r\\nvoid main(void) {\\r\\n    pos = (uModelMatrix * vec4(aVertexPosition, 1)).xyz;\\r\\n    normal = normalize((uinvTModelMatrix * vec4(aNormal, 0.0)).xyz);\\r\\n    viewDir = normalize(uCamPos - pos);\\r\\n    shading();\\r\\n    gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);\\r\\n}\"","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ObjectComponent.vue?vue&type=style&index=0&id=a96d9380&lang=css\"","module.exports = __webpack_public_path__ + \"img/debug.1151d187.png\";","export default \"attribute vec3 aVertexPosition;\\r\\nattribute vec3 aFrontColor;\\r\\nattribute vec3 aNormal;\\r\\nattribute vec2 aUV;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\nuniform mat4 uinvTModelMatrix;\\r\\nuniform mat4 uDepthMatrix;\\r\\n// uniform mat4 lightspaceMatrices[4];\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\nvarying vec2 uv;\\r\\nvarying vec4 depth_pos;\\r\\n\\r\\nvoid main(void) {\\r\\n    fragcolor = aFrontColor;\\r\\n    uv = aUV;\\r\\n    pos = (uModelMatrix * vec4(aVertexPosition, 1)).xyz;\\r\\n    vNormal = ((uinvTModelMatrix * vec4(aNormal, 0.0)).xyz);\\r\\n    depth_pos = uDepthMatrix * vec4(pos, 1.0);\\r\\n    gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);\\r\\n    // gl_Position = depth_pos;\\r\\n    // depth_pos = gl_Position;\\r\\n    // gl_Position = depth_pos;\\r\\n}\"","module.exports = \"data:image/png;base64,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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAM77I9BVCAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAMRmaP3VmyE/AAAAAElFTkSuQmCC\"","import { mat4, vec3, quat } from 'gl-matrix'\r\nimport { iPhongLight, PhongLight } from './light'\r\ndeclare let gl: WebGLRenderingContext\r\n\r\nclass LightUniforms {\r\n    enabled: WebGLUniformLocation;\r\n    position: WebGLUniformLocation;\r\n    la: WebGLUniformLocation;\r\n    ld: WebGLUniformLocation;\r\n    ls: WebGLUniformLocation;\r\n    attenuation: WebGLUniformLocation;\r\n\r\n    constructor (idx: number, shaderProgram: WebGLProgram) {\r\n      this.enabled = gl.getUniformLocation(shaderProgram, `lights[${idx}].enabled`)\r\n      this.position = gl.getUniformLocation(shaderProgram, `lights[${idx}].position`)\r\n      this.la = gl.getUniformLocation(shaderProgram, `lights[${idx}].la`)\r\n      this.ld = gl.getUniformLocation(shaderProgram, `lights[${idx}].ld`)\r\n      this.ls = gl.getUniformLocation(shaderProgram, `lights[${idx}].ls`)\r\n      this.attenuation = gl.getUniformLocation(shaderProgram, `lights[${idx}].attenuation`)\r\n    }\r\n}\r\n\r\nclass TextureUniforms {\r\n  enabled: WebGLUniformLocation;\r\n  texture: WebGLUniformLocation\r\n\r\n  constructor (name: string, shaderProgram: WebGLProgram) {\r\n    this.enabled = gl.getUniformLocation(shaderProgram, `${name}_enabled`);\r\n    this.texture = gl.getUniformLocation(shaderProgram, name);\r\n  }\r\n}\r\n\r\nclass BasicShader {\r\n    name: string;\r\n    shaderProgram: WebGLProgram;\r\n\r\n    vertexPositionAttribute: GLint;\r\n    vertexFrontColorAttribute: GLint;\r\n    vertexNormalAttribute?: GLint;\r\n    vertexUVAttribute? : GLint;\r\n\r\n    modelMatrixUniform?: WebGLUniformLocation;\r\n    invT_modelMatrixUniform?: WebGLUniformLocation;\r\n    mvMatrixUniform?: WebGLUniformLocation;\r\n    invT_mvMatrixUniform?: WebGLUniformLocation;\r\n    pMatrixUniform?: WebGLUniformLocation;\r\n\r\n    lightUniforms?: LightUniforms[] = [];\r\n    glossUniform?: WebGLUniformLocation;\r\n    camPosUniform?: WebGLUniformLocation;\r\n    textureUniform?: TextureUniforms;\r\n    \r\n    depthTexUniform?: WebGLUniformLocation;\r\n    depthMatrix?: WebGLUniformLocation;\r\n\r\n    is_loaded: boolean = false;\r\n\r\n    constructor (shader_name: string) {\r\n      this.name = shader_name;\r\n      this.getShader(shader_name)\r\n      this.initShaders()\r\n    }\r\n\r\n    getShader (name: string): void {\r\n      const vert_shader = gl.createShader(gl.VERTEX_SHADER)\r\n      // console.log(require('../goraud.vert'))\r\n      let shader_src = require(`../shaders/${name}.vert`).default\r\n      gl.shaderSource(vert_shader, shader_src)\r\n      gl.compileShader(vert_shader)\r\n\r\n      const frag_shader = gl.createShader(gl.FRAGMENT_SHADER)\r\n      shader_src = require(`../shaders/${name}.frag`).default\r\n      gl.shaderSource(frag_shader, shader_src)\r\n      gl.compileShader(frag_shader)\r\n\r\n      if (!gl.getShaderParameter(vert_shader, gl.COMPILE_STATUS)) {\r\n        alert(gl.getShaderInfoLog(vert_shader))\r\n        return null\r\n      } else if (!gl.getShaderParameter(frag_shader, gl.COMPILE_STATUS)) {\r\n        alert(gl.getShaderInfoLog(frag_shader))\r\n        return null\r\n      }\r\n\r\n      this.shaderProgram = gl.createProgram()\r\n      gl.attachShader(this.shaderProgram, vert_shader)\r\n      gl.attachShader(this.shaderProgram, frag_shader)\r\n      gl.linkProgram(this.shaderProgram)\r\n      if (!gl.getProgramParameter(this.shaderProgram, gl.LINK_STATUS)) {\r\n        alert('Could not initialise shaders')\r\n      }\r\n    }\r\n\r\n    initShaders (): void {\r\n      gl.useProgram(this.shaderProgram)\r\n\r\n      this.vertexPositionAttribute = gl.getAttribLocation(this.shaderProgram, 'aVertexPosition')\r\n      gl.enableVertexAttribArray(this.vertexPositionAttribute)\r\n      this.vertexFrontColorAttribute = gl.getAttribLocation(this.shaderProgram, 'aFrontColor')\r\n      gl.enableVertexAttribArray(this.vertexFrontColorAttribute)\r\n\r\n      this.vertexNormalAttribute = gl.getAttribLocation(this.shaderProgram, 'aNormal')\r\n      if(this.vertexNormalAttribute >= 0)\r\n        gl.enableVertexAttribArray(this.vertexNormalAttribute)\r\n      \r\n      this.vertexUVAttribute = gl.getAttribLocation(this.shaderProgram, 'aUV')\r\n      if(this.vertexUVAttribute >= 0){\r\n        // enable attribute in modelObject class\r\n        this.textureUniform = new TextureUniforms('tex', this.shaderProgram);\r\n      }\r\n\r\n      this.pMatrixUniform = gl.getUniformLocation(this.shaderProgram, 'uPMatrix')\r\n      this.mvMatrixUniform = gl.getUniformLocation(this.shaderProgram, 'uMVMatrix')\r\n      this.invT_mvMatrixUniform = gl.getUniformLocation(this.shaderProgram, 'uinvTMVMatrix')\r\n      this.modelMatrixUniform = gl.getUniformLocation(this.shaderProgram, 'uModelMatrix')\r\n      this.invT_modelMatrixUniform = gl.getUniformLocation(this.shaderProgram, 'uinvTModelMatrix')\r\n\r\n      for (let i = 0; i < 4; i++) { this.lightUniforms.push(new LightUniforms(i, this.shaderProgram)) }\r\n      this.glossUniform = gl.getUniformLocation(this.shaderProgram, 'gloss')\r\n      this.camPosUniform = gl.getUniformLocation(this.shaderProgram, 'uCamPos')\r\n      \r\n      this.depthTexUniform = gl.getUniformLocation(this.shaderProgram, 'depth_tex');\r\n      this.depthMatrix = gl.getUniformLocation(this.shaderProgram, 'uDepthMatrix');\r\n\r\n      this.is_loaded = true;\r\n    }\r\n\r\n    setCamPosUniform (camPos: vec3): void {\r\n      gl.useProgram(this.shaderProgram)\r\n      gl.uniform3fv(this.camPosUniform, camPos)\r\n    }\r\n\r\n    setWorldMatrixUniforms (mvp: {pMatrix: mat4, mvMatrix: mat4, invT_mvMatrix: mat4}): void {\r\n      gl.useProgram(this.shaderProgram)\r\n      gl.uniformMatrix4fv(this.pMatrixUniform, false, mvp.pMatrix)\r\n      gl.uniformMatrix4fv(this.mvMatrixUniform, false, mvp.mvMatrix)\r\n      gl.uniformMatrix4fv(this.invT_mvMatrixUniform, false, mvp.invT_mvMatrix)\r\n    }\r\n\r\n    setDepthMatrixUniforms(depthTextureSize:number, depthMatrix: mat4, texture_buffer:WebGLTexture, idx=0){\r\n      gl.useProgram(this.shaderProgram);\r\n      // gl.uniform1i(this.shaderProgram.textureUniform.enabled, 1);\r\n      gl.uniform1i(this.depthTexUniform, 1+idx);\r\n      gl.activeTexture(gl.TEXTURE1+idx);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture_buffer);\r\n      // gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n      // gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);  \r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,      // target\r\n        0,                  // mip level\r\n        // gl.DEPTH_COMPONENT, // internal format\r\n        gl.RGBA, // internal format\r\n        depthTextureSize,   // width\r\n        depthTextureSize,   // height\r\n        0,                  // border\r\n        // gl.DEPTH_COMPONENT, // format\r\n        gl.RGBA, // format\r\n        gl.UNSIGNED_INT,    // type\r\n        // gl.UNSIGNED_BYTE,    // type\r\n        null);              // data\r\n      gl.uniformMatrix4fv(this.depthMatrix, false, depthMatrix);\r\n      // gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textures.texture);\r\n      // gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.FLOAT, );\r\n    }\r\n\r\n    setLightUniforms (lights: iPhongLight[]): void {\r\n      gl.useProgram(this.shaderProgram)\r\n      lights.forEach((light, idx) => {\r\n        gl.uniform1i(this.lightUniforms[idx].enabled, 1)\r\n        gl.uniform3fv(this.lightUniforms[idx].la, light.la)\r\n        gl.uniform3fv(this.lightUniforms[idx].ld, light.ld)\r\n        gl.uniform3fv(this.lightUniforms[idx].ls, light.ls)\r\n        gl.uniform1f(this.lightUniforms[idx].attenuation, light.attenuation)\r\n        gl.uniform3fv(this.lightUniforms[idx].position, light.position)\r\n      })\r\n    }\r\n}\r\n\r\nexport {\r\n  BasicShader\r\n}\r\n","var map = {\n\t\"./cel.vert\": \"fc65\",\n\t\"./custom.vert\": \"268f\",\n\t\"./flat.vert\": \"615c\",\n\t\"./goraud.vert\": \"148c\",\n\t\"./phong.vert\": \"00f1\",\n\t\"./shadow.vert\": \"5560\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"31ff\";","export default \"precision highp float;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\n\\r\\nvoid main(void) {\\r\\n    gl_FragColor.rgb = fragcolor;\\r\\n    gl_FragColor.w = 1.;\\r\\n}\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".object-component{position:inherit;font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:left;font-size:24px;line-break:strict;line-height:0}.array{display:inline-block;padding:0 5px}.input{font-size:18px;width:60px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var map = {\n\t\"./Car_road.json\": \"5ecf\",\n\t\"./Church_s.json\": \"cf80\",\n\t\"./Csie.json\": \"1370\",\n\t\"./Easter.json\": \"bc8b\",\n\t\"./Fighter.json\": \"78dc\",\n\t\"./Kangaroo.json\": \"a459\",\n\t\"./Longteap.json\": \"35cd\",\n\t\"./Mercedes.json\": \"040a\",\n\t\"./Mig27.json\": \"8798\",\n\t\"./Patchair.json\": \"cbfc\",\n\t\"./Plant.json\": \"d941\",\n\t\"./Teapot.json\": \"56d8\",\n\t\"./Tomcat.json\": \"1aab\",\n\t\"./plane.json\": \"e91d\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"511d\";","export default \"attribute vec3 aVertexPosition;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\n\\r\\nvarying vec4 projected_pos;\\r\\n\\r\\nvoid main(void) {\\r\\n    projected_pos = uPMatrix * uMVMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\\r\\n    gl_Position = projected_pos;\\r\\n}\"","export default \"attribute vec3 aVertexPosition;\\r\\nattribute vec3 aFrontColor;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 pos;\\r\\n\\r\\n\\r\\nvoid main(void) {\\r\\n    pos = (uModelMatrix * vec4(aVertexPosition, 1.0)).xyz;\\r\\n    fragcolor = aFrontColor;\\r\\n    gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);\\r\\n}\"","import { mat4, mat3, vec3, quat } from 'gl-matrix'\r\nimport { BasicShader } from '../ts/shaderProgram'\r\nimport { Transform } from './transform'\r\nimport { Camera } from './camera'\r\ndeclare let gl: WebGLRenderingContext\r\n\r\ninterface iPhongLight {\r\n    position: vec3;\r\n    la: vec3;\r\n    ld: vec3;\r\n    ls: vec3;\r\n    attenuation: number;\r\n}\r\n\r\nclass PhongLight extends Transform implements iPhongLight {\r\n    la: vec3 = vec3.fromValues(0.5, 0.5, 0.5);\r\n    ld: vec3 = vec3.fromValues(0.5, 0.5, 0.5);\r\n    ls: vec3 = vec3.fromValues(0.9, 0.9, 0.9);\r\n    attenuation: number = 100;\r\n\r\n    constructor () { super() }\r\n\r\n    setAmbient (x: number, y: number, z: number): PhongLight { this.la = vec3.fromValues(x, y, z); return this }\r\n    setDiffuse (x: number, y: number, z: number): PhongLight { this.ld = vec3.fromValues(x, y, z); return this }\r\n    setSpecular (x: number, y: number, z: number): PhongLight { this.ls = vec3.fromValues(x, y, z); return this }\r\n    setAttenuation(attenuation: number): PhongLight { this.attenuation = attenuation; return this; }\r\n}\r\n\r\nclass Shadow {\r\n\r\n  light: PhongLight;\r\n  view: Camera;\r\n  depthTexture: WebGLTexture;\r\n  depthTextureSize: number = 2048;\r\n  depthFramebuffer: WebGLFramebuffer;\r\n\r\n  unusedTexture: WebGLTexture;\r\n\r\n  constructor(light: PhongLight) {\r\n    this.light = light;\r\n    this.view = new Camera({width: this.depthTextureSize, height: this.depthTextureSize}, 120)\r\n    this.createDepthBuffer()\r\n  }\r\n\r\n  setFrameBuffer(): void\r\n  {\r\n    // this.createDepthBuffer()\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.depthFramebuffer);\r\n    // gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    this.setPosRot()\r\n    // gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\r\n    // gl.framebufferTexture2D(\r\n    //     gl.FRAMEBUFFER,       // target\r\n    //     gl.DEPTH_ATTACHMENT,  // attachment point\r\n    //     gl.TEXTURE_2D,        // texture target\r\n    //     this.depthTexture,         // texture\r\n    //     0);                   // mip level \r\n\r\n    // // attach it to the framebuffer\r\n    // gl.bindTexture(gl.TEXTURE_2D, this.unusedTexture);\r\n    // gl.framebufferTexture2D(\r\n    //   gl.FRAMEBUFFER,        // target\r\n    //   gl.COLOR_ATTACHMENT0,  // attachment point\r\n    //   gl.TEXTURE_2D,         // texture target\r\n    //   this.unusedTexture,         // texture\r\n    //   0);                    // mip level\r\n    // let status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\r\n    // if (status !== gl.FRAMEBUFFER_COMPLETE) {\r\n    //   console.log(\"The created frame buffer is invalid: \" + status.toString());\r\n    // }\r\n  }\r\n  \r\n  setPosRot(): void{\r\n    this.view.position = this.light.position;\r\n    let mat = mat3.fromMat4(mat3.create(), mat4.targetTo(mat4.create(), this.light.position, vec3.zero(vec3.create()), vec3.fromValues(0, 1, 0)))\r\n    this.view.rotation = quat.fromMat3(this.view.rotation, mat);\r\n  }\r\n\r\n  getMatrix(): mat4\r\n  {// Assume the MVP is calculated\r\n    let mvp = this.view.getMVP()\r\n    var mat = mat4.create();\r\n    mat = mat4.mul(mat, mvp.pMatrix, mvp.mvMatrix);\r\n    return mat;\r\n  }\r\n\r\n  createDepthBuffer(): void\r\n  {\r\n    this.depthTexture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D,      // target\r\n        0,                  // mip level\r\n        gl.DEPTH_COMPONENT, // internal format\r\n        this.depthTextureSize,   // width\r\n        this.depthTextureSize,   // height\r\n        0,                  // border\r\n        gl.DEPTH_COMPONENT, // format\r\n        gl.UNSIGNED_INT,    // type\r\n        null);              // data\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n     \r\n          // mip level\r\n      \r\n    // create a color texture of the same size as the depth texture\r\n    this.unusedTexture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, this.unusedTexture);\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        0,\r\n        gl.RGBA,\r\n        this.depthTextureSize,\r\n        this.depthTextureSize,\r\n        0,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        null,\r\n    );\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      \r\n\r\n    // attach it to the framebuffer\r\n    this.depthFramebuffer = gl.createFramebuffer();\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this.depthFramebuffer);\r\n    gl.framebufferTexture2D(\r\n        gl.FRAMEBUFFER,       // target\r\n        gl.DEPTH_ATTACHMENT,  // attachment point\r\n        gl.TEXTURE_2D,        // texture target\r\n        this.depthTexture,         // texture\r\n        0);         \r\n\r\n    gl.framebufferTexture2D(\r\n        gl.FRAMEBUFFER,        // target\r\n        gl.COLOR_ATTACHMENT0,  // attachment point\r\n        gl.TEXTURE_2D,         // texture target\r\n        this.unusedTexture,         // texture\r\n        0);                    // mip level\r\n  }\r\n}\r\n\r\nexport {\r\n  iPhongLight,\r\n  PhongLight,\r\n  Shadow\r\n}\r\n","export default \"// #extension GL_OES_standard_derivatives : enable\\r\\n// #extension GL_EXT_frag_depth : enable\\r\\nprecision highp float;\\r\\n\\r\\nvarying vec4 projected_pos;\\r\\n\\r\\nvoid main(void) {\\r\\n    float depth = (projected_pos.xyz / projected_pos.w).z;\\r\\n    // gl_FragColor = -vec4(depth);\\r\\n    gl_FragColor = vec4(1.,0.,0., 1.);\\r\\n    gl_FragColor.w = 1.;\\r\\n    // gl_FragDepthEXT = depth*0.5 + 0.5;\\r\\n}\"","var map = {\n\t\"./debug.png\": \"1b8a\",\n\t\"./debug_white.png\": \"9d77\",\n\t\"./debug_yellow.png\": \"29e0\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"9791\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ObjectComponent.vue?vue&type=style&index=0&id=a96d9380&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"454c9dce\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","module.exports = \"data:image/png;base64,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\"","export default \"precision highp float;\\r\\n\\r\\n// varying vec4 fragcolor;\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\n\\r\\nstruct Light {\\r\\n    bool enabled;\\r\\n    vec3 position;\\r\\n    vec3 la; // Ambient\\r\\n    vec3 ld; // Diffuse\\r\\n    vec3 ls; // Specular\\r\\n    float attenuation;\\r\\n\\r\\n};\\r\\n\\r\\nuniform Light lights[4];\\r\\nuniform vec3 uCamPos;\\r\\nuniform float gloss;\\r\\n\\r\\nvoid main(void) {\\r\\n    gl_FragColor = vec4(0, 0, 0, 1);\\r\\n    vec3 color = fragcolor;\\r\\n    // vec3 camPos = uCamPos;\\r\\n    vec3 normal = normalize(vNormal);\\r\\n    vec3 viewDir = normalize(uCamPos - pos);\\r\\n    float rim = dot(normal, viewDir);\\r\\n    if(rim < 0.2){\\r\\n        return;\\r\\n    }else if(rim < .4){\\r\\n        gl_FragColor.rgb = vec3(1.- .2*smoothstep(.2, .4, rim));\\r\\n        return;\\r\\n    }\\r\\n    // vec3 color = vec3(1, 0 ,0);\\r\\n    vec3 light_color = vec3(0);\\r\\n    vec3 spec_color = vec3(0);\\r\\n    for(int i = 0; i < 4; ++i){\\r\\n        if(!lights[i].enabled){\\r\\n            break;\\r\\n        }\\r\\n        vec3 lightDir = (lights[i].position - pos);\\r\\n        float atten = distance(lightDir, vec3(0));\\r\\n        atten = pow(max(.1, lights[i].attenuation-atten)/lights[i].attenuation, 2.);\\r\\n        lightDir = normalize(lightDir);\\r\\n\\r\\n        float dif = dot(normal, lightDir)*atten;\\r\\n        if(dif > 0.6) dif = .8;\\r\\n        else dif = dif*0.1;\\r\\n        light_color += (lights[i].la + dif * lights[i].ld);\\r\\n        \\r\\n        vec3 halfDir = normalize(viewDir + lightDir);\\r\\n        float spec = pow(max(dot(normal, halfDir), 0.), gloss)*atten;\\r\\n        spec = step(.4, spec*atten);\\r\\n        spec_color += (lights[i].ls * spec);\\r\\n    }\\r\\n    gl_FragColor.rgb = light_color * color + spec_color;\\r\\n}\"","export default \"#extension GL_OES_standard_derivatives : enable\\r\\nprecision highp float;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\n\\r\\nstruct Light {\\r\\n    bool enabled;\\r\\n    vec3 position;\\r\\n    vec3 la; // Ambient\\r\\n    vec3 ld; // Diffuse\\r\\n    vec3 ls; // Specular\\r\\n    float attenuation;\\r\\n};\\r\\n\\r\\nuniform Light lights[4];\\r\\nuniform vec3 uCamPos;\\r\\nuniform float gloss;\\r\\n\\r\\nvoid main(void) {\\r\\n    // Normal\\r\\n    vec3 dx = dFdx(pos);\\r\\n    vec3 dy = dFdy(pos);\\r\\n    vec3 normal = normalize(cross(dx, dy));\\r\\n    vec3 viewDir = normalize(uCamPos - pos);\\r\\n\\r\\n    // Color\\r\\n    gl_FragColor = vec4(0, 0, 0, 1);\\r\\n    vec3 color = fragcolor.rgb;\\r\\n    vec3 light_color = vec3(0);\\r\\n    vec3 spec_color = vec3(0);\\r\\n    for(int i = 0; i < 4; ++i){\\r\\n        if(!lights[i].enabled){\\r\\n            break;\\r\\n        }\\r\\n        vec3 lightDir = (lights[i].position - pos);\\r\\n        float atten = distance(lightDir, vec3(0));\\r\\n        atten = pow(max(.1, lights[i].attenuation-atten)/lights[i].attenuation, 2.);\\r\\n        lightDir = normalize(lightDir);\\r\\n\\r\\n        float dif = dot(normal, lightDir)*atten;\\r\\n        light_color += (lights[i].la + dif * lights[i].ld);\\r\\n        \\r\\n        vec3 halfDir = normalize(viewDir + lightDir);\\r\\n        float spec = pow(max(dot(normal, halfDir), 0.), gloss)*atten;\\r\\n        spec_color += (lights[i].ls * spec);\\r\\n    }\\r\\n    gl_FragColor.rgb = light_color * color + spec_color;\\r\\n}\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SceneObjectList.vue?vue&type=style&index=0&id=d766ded8&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"72f929e9\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export default \"precision highp float;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\nvarying vec2 uv;\\r\\n\\r\\nuniform sampler2D tex;\\r\\nuniform bool tex_enabled;\\r\\n\\r\\nuniform sampler2D depth_tex;\\r\\nvarying vec4 depth_pos;\\r\\n\\r\\n\\r\\nstruct Light {\\r\\n    bool enabled;\\r\\n    vec3 position;\\r\\n    vec3 la; // Ambient\\r\\n    vec3 ld; // Diffuse\\r\\n    vec3 ls; // Specular\\r\\n    float attenuation;\\r\\n};\\r\\n\\r\\n\\r\\nuniform float gloss;\\r\\nuniform Light lights[4];\\r\\nuniform vec3 uCamPos;\\r\\n\\r\\n\\r\\nvoid main(void) {\\r\\n    // depth\\r\\n    vec3 relative_depth_pos = depth_pos.xyz / depth_pos.w;\\r\\n    relative_depth_pos = relative_depth_pos*0.5 + 0.5;\\r\\n    vec4 shadowmap_color = texture2D(depth_tex, relative_depth_pos.xy);\\r\\n    float shadow_dist = shadowmap_color.r;\\r\\n\\r\\n    // gl_FragColor.rgb = vec3(relative_depth_pos.z);\\r\\n    // gl_FragColor.rgb = vec3(relative_depth_pos.xyz);\\r\\n    // gl_FragColor.rgb = shadowmap_color.rrr;\\r\\n    // gl_FragColor.a = 1.;\\r\\n    // return;\\r\\n    \\r\\n    if(relative_depth_pos.z > shadow_dist+0.0001){\\r\\n        gl_FragColor = vec4(0, 0, 0, 1);\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    // color\\r\\n    gl_FragColor = vec4(0, 0, 0, 1);\\r\\n    vec3 color;\\r\\n    if(tex_enabled){\\r\\n        color = texture2D(tex, uv).rgb;\\r\\n        // gl_FragColor.rgb = texture2D(depth_tex, uv).rgb;\\r\\n        // return;\\r\\n    }\\r\\n    else{\\r\\n        color = fragcolor;\\r\\n    }\\r\\n    // vec3 camPos = uCamPos;\\r\\n    vec3 normal = normalize(vNormal);\\r\\n    vec3 viewDir = normalize(uCamPos - pos);\\r\\n    // float rim = dot(normal, viewDir);\\r\\n    // if(rim < 0.2){\\r\\n    //     return;\\r\\n    // }else if(rim < .4){\\r\\n    //     gl_FragColor.rgb = vec3(1.- .2*smoothstep(.2, .4, rim));\\r\\n    //     return;\\r\\n    // }\\r\\n    // vec3 color = vec3(1, 0 ,0);\\r\\n    vec3 light_color = vec3(0);\\r\\n    vec3 spec_color = vec3(0);\\r\\n    for(int i = 0; i < 4; ++i){\\r\\n        if(!lights[i].enabled){\\r\\n            break;\\r\\n        }\\r\\n        vec3 lightDir = (lights[i].position - pos);\\r\\n        float atten = distance(lightDir, vec3(0));\\r\\n        atten = pow(max(.1, lights[i].attenuation-atten)/lights[i].attenuation, 2.);\\r\\n        lightDir = normalize(lightDir);\\r\\n\\r\\n        float dif = dot(normal, lightDir)*atten;\\r\\n        light_color += (lights[i].la + dif * lights[i].ld);\\r\\n        \\r\\n        vec3 halfDir = normalize(viewDir + lightDir);\\r\\n        float spec = pow(max(dot(normal, halfDir), 0.), gloss)*atten;\\r\\n        spec_color += (lights[i].ls * spec);\\r\\n    }\\r\\n    gl_FragColor.rgb = light_color * color + spec_color;\\r\\n}\"","import { Mode } from 'fs';\r\nimport { mat4, vec3, quat } from 'gl-matrix'\r\nimport { BasicShader } from './shaderProgram'\r\nimport { Transform } from './transform'\r\ndeclare let gl: WebGLRenderingContext\r\n\r\nclass CustomWebGLBuffer extends WebGLBuffer {\r\n    itemSize: number;\r\n    numItems: number;\r\n}\r\n\r\ninterface ObjectAttribute {\r\n  name: string,\r\n  object: ModelObject\r\n}\r\n\r\ninterface VertexAttributeBuffers {\r\n    vertexPositions?: CustomWebGLBuffer,\r\n    vertexNormals?: CustomWebGLBuffer,\r\n    vertexFrontcolors?: CustomWebGLBuffer,\r\n    vertexBackcolors?: CustomWebGLBuffer,\r\n    vertexTextureCoords?: CustomWebGLBuffer\r\n}\r\n\r\ninterface VertexAttributes {\r\n    vertexPositions?: Float32Array,\r\n    vertexNormals?: Float32Array,\r\n    vertexFrontcolors?: Float32Array,\r\n    vertexBackcolors?: Float32Array,\r\n    vertexTextureCoords?: Float32Array,\r\n}\r\n\r\ninterface WebGLTexture {\r\n  name: string,\r\n  texture: HTMLImageElement,\r\n  buffer: WebGLBuffer,\r\n}\r\n\r\nclass ModelObject extends Transform {\r\n    position: vec3 = vec3.zero(vec3.create());\r\n    rotation: quat = quat.create();\r\n    scale: vec3 = vec3.fromValues(1, 1, 1);\r\n    shear: vec3 = vec3.zero(vec3.create());\r\n\r\n    gloss: number = 16;\r\n\r\n    textures: WebGLTexture;\r\n    \r\n    isLoaded = false;\r\n\r\n    vertexAttributes: VertexAttributes;\r\n    vertexBuffers: VertexAttributeBuffers;\r\n    shaderProgram: BasicShader;\r\n\r\n    constructor (\r\n      shader: BasicShader,\r\n      model_name?: string,\r\n      texture_name?: string\r\n    ) {\r\n      super()\r\n      this.shaderProgram = shader\r\n      if (model_name !== undefined) { this.loadModel(model_name) }\r\n      if (texture_name !== undefined) { this.loadTexture(texture_name) }\r\n    }\r\n\r\n    loadModel (name: string): void {\r\n      // const request = new XMLHttpRequest()\r\n      // console.log(require(`../assets/model/${name}.json`))\r\n      // // request.open('GET', `./src/assets/model/${name}.json`)\r\n      // // console.log(`./src/assets/model/${name}.json`)\r\n      // request.onreadystatechange = () => {\r\n      //   if (request.readyState === 4) {\r\n      //     console.log(request.responseText);\r\n      //     this.vertexAttributes = JSON.parse(request.responseText) as VertexAttributes\r\n      //     // console.log(this.vertexAttributes);\r\n      //     this.handleModelData()\r\n      //   }\r\n      // }\r\n      // request.send()\r\n      // console.log(require(`../assets/model/${name}.json`))\r\n      this.vertexAttributes = require(`../assets/model/${name}.json`) as VertexAttributes;\r\n      this.handleModelData();\r\n    }\r\n\r\n    loadTexture(name: string): void{\r\n      var image = new Image();\r\n      image.onload = () => {\r\n        this.textures.texture = image;\r\n        console.log('Image loaded!');\r\n      }\r\n      image.src = `${require(`../assets/texture/${name}`)}`;\r\n      this.textures = {\r\n        name: name,\r\n        texture: undefined,\r\n        buffer: gl.createTexture()\r\n      }\r\n    }\r\n\r\n    handleModelData (): void {\r\n      // console.log(this.vertexAttributes.vertexPositions);\r\n      this.vertexBuffers = {}\r\n      for (const key in this.vertexAttributes) {\r\n        if (key !== undefined && key != 'vertexTextureCoords') {\r\n          let buf = gl.createBuffer() as CustomWebGLBuffer\r\n          gl.bindBuffer(gl.ARRAY_BUFFER, buf)\r\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(<Float32Array> this.vertexAttributes[key]), gl.STATIC_DRAW)\r\n          buf.itemSize = 3\r\n          buf.numItems = this.vertexAttributes[key].length / 3\r\n          this.vertexBuffers[key] = buf\r\n        }else if(key == 'vertexTextureCoords'){\r\n          let buf = gl.createBuffer() as CustomWebGLBuffer\r\n          gl.bindBuffer(gl.ARRAY_BUFFER, buf)\r\n          gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(<Float32Array> this.vertexAttributes[key]), gl.STATIC_DRAW)\r\n          buf.itemSize = 2\r\n          buf.numItems = this.vertexAttributes[key].length / 2\r\n          this.vertexBuffers[key] = buf\r\n        }\r\n      }\r\n      this.isLoaded = true\r\n    }\r\n\r\n    draw (shaderProgram?: BasicShader): void {\r\n      if (!this.isLoaded && !this.shaderProgram.is_loaded) { console.log('Model not loaded, skip drawing'); return; }\r\n      if(shaderProgram === undefined){ \r\n        shaderProgram = this.shaderProgram;\r\n      }\r\n      gl.useProgram(shaderProgram.shaderProgram)\r\n      this.setUniform(shaderProgram)\r\n\r\n      // Setup teapot position data\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers.vertexPositions)\r\n      gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,\r\n        this.vertexBuffers.vertexPositions.itemSize,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        0)\r\n\r\n      // Setup teapot front color data\r\n      if(shaderProgram.vertexFrontColorAttribute >= 0){\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers.vertexFrontcolors)\r\n      gl.vertexAttribPointer(shaderProgram.vertexFrontColorAttribute,\r\n        this.vertexBuffers.vertexFrontcolors.itemSize,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        0)\r\n      }\r\n      \r\n      // Setup teapot normal data\r\n      if(shaderProgram.vertexNormalAttribute >= 0){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers.vertexNormals)\r\n        gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute,\r\n          this.vertexBuffers.vertexNormals.itemSize,\r\n          gl.FLOAT,\r\n          false,\r\n          0,\r\n          0)\r\n      }\r\n      if(shaderProgram.vertexUVAttribute >= 0 && this.vertexBuffers.vertexTextureCoords !== undefined){\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers.vertexTextureCoords)\r\n        gl.vertexAttribPointer(shaderProgram.vertexUVAttribute,\r\n          this.vertexBuffers.vertexTextureCoords.itemSize,\r\n          gl.FLOAT,\r\n          false,\r\n          0,\r\n          0)\r\n      }\r\n      gl.drawArrays(gl.TRIANGLES, 0, this.vertexBuffers.vertexPositions.numItems)\r\n    }\r\n\r\n    setUniform (shaderProgram: BasicShader): void {\r\n      gl.useProgram(shaderProgram.shaderProgram)\r\n      let mat = mat4.create()\r\n      mat4.scale(mat, mat, this.scale)\r\n      \r\n      let shear_mat = mat4.fromValues(\r\n        1, this.shear[2], 0, 0,\r\n        this.shear[0], 1, 0, 0,\r\n        this.shear[1], 0, 1, 0,\r\n        0, 0, 0, 1\r\n      )\r\n\r\n      mat4.mul(mat, mat4.fromQuat(mat4.create(), this.rotation), mat)\r\n      mat4.mul(mat, shear_mat, mat)\r\n      mat4.mul(mat, mat4.fromTranslation(mat4.create(), this.position), mat)\r\n      \r\n      gl.uniformMatrix4fv(shaderProgram.modelMatrixUniform, false, mat)\r\n\r\n      mat4.transpose(mat, mat4.invert(mat, mat))\r\n      gl.uniformMatrix4fv(shaderProgram.invT_modelMatrixUniform, false, mat)\r\n\r\n      gl.uniform1f(shaderProgram.glossUniform, this.gloss);\r\n\r\n\r\n      if(shaderProgram.vertexUVAttribute >= 0) {\r\n        if(this.textures !== undefined){\r\n          gl.enableVertexAttribArray(shaderProgram.vertexUVAttribute)\r\n          gl.uniform1i(shaderProgram.textureUniform.enabled, 1);\r\n          gl.uniform1i(shaderProgram.textureUniform.texture, 0);\r\n          gl.activeTexture(gl.TEXTURE0);\r\n          gl.bindTexture(gl.TEXTURE_2D, this.textures.buffer);\r\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n          gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);  \r\n          if(this.textures.texture !== undefined)\r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.textures.texture);\r\n          else\r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));\r\n        }\r\n        else{\r\n          gl.disableVertexAttribArray(shaderProgram.vertexUVAttribute)\r\n          gl.uniform1i(shaderProgram.textureUniform.enabled, 0);\r\n        }\r\n      } \r\n    }\r\n\r\n    setScale (s: number):ModelObject { super.setScale(s); return this }\r\n    setScaleXYZ (x: number, y: number, z: number):ModelObject { super.setScaleXYZ(x, y, z); return this }\r\n\r\n    setPos (x: number, y: number, z: number): ModelObject { super.setPos(x, y, z); return this }\r\n    translate (x: number, y: number, z: number): ModelObject { super.translate(x, y, z); return this }\r\n\r\n    setRot (x: number, y: number, z: number): ModelObject { super.setRot(x, y, z); return this }\r\n    rotateX (r: number): ModelObject { super.rotateX(r); return this }\r\n    rotateY (r: number): ModelObject { super.rotateY(r); return this }\r\n    rotateZ (r: number): ModelObject { super.rotateZ(r); return this }\r\n    rotateAxis (r: number, axis: vec3): ModelObject { super.rotateAxis(r, axis); return this }\r\n\r\n    setGloss(gloss: number): ModelObject { this.gloss = gloss; return this; }\r\n}\r\n\r\nexport {\r\n  ModelObject,\r\n  ObjectAttribute\r\n}\r\n","/* https://github.com/toji/gl-matrix */\r\nimport { mat4, vec3, quat } from 'gl-matrix'\r\nimport './js/webgl-utils'\r\nimport { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport SceneObjectListComponent from './components/SceneObjectList.vue'\r\n\r\n/* Custom Module */\r\nimport { Transform, degToRad } from './ts/transform'\r\nimport { ModelObject } from './ts/modelObject'\r\nimport { BasicShader } from './ts/shaderProgram'\r\nimport { Camera } from './ts/camera'\r\nimport { PhongLight, Shadow } from './ts/light'\r\n// import { Vue } from 'vue-class-component'\r\n\r\nwindow.onload = () => webGLStart();\r\nwindow.onresize = () => setCanvasSize();\r\n\r\ndeclare global {\r\n    interface Window {\r\n        // from webgl-utils\r\n        requestAnimFrame: Function\r\n    }\r\n    var gl: WebGLRenderingContext\r\n    var elapsed_time: number\r\n\r\n    var scene_objects: { [name: string]: ModelObject };\r\n    var shader_programs: { [name: string]: BasicShader };\r\n    var lights: PhongLight[];\r\n    var camera: Camera;\r\n    var texture_list: string[];\r\n}\r\n\r\n\r\n// common variables\r\ndeclare var gl: WebGLRenderingContext;\r\ndeclare var elapsed_time: number;\r\ndeclare var scene_objects: { [name: string]: ModelObject };\r\ndeclare var shader_programs: { [name: string]: BasicShader };\r\ndeclare var lights: PhongLight[];\r\ndeclare var camera: Camera;\r\ndeclare var texture_list: string[];\r\n\r\nvar teapotAngle = 20;\r\nvar lastTime    = 0;\r\nvar canvas: HTMLCanvasElement = document.createElement(\"canvas\");\r\nvar shadow: Shadow;\r\nvar shadow_shader: BasicShader;\r\n\r\nfunction initGlobalVariables() {\r\n    global.lights = []\r\n    global.scene_objects = {}\r\n    global.shader_programs = {}\r\n    global.elapsed_time = .1;\r\n    global.camera = new Camera({width: canvas.width, height: canvas.height});\r\n    global.texture_list = [\r\n        'debug.png',\r\n        'debug_white.png',\r\n        'debug_yellow.png',\r\n    ]\r\n}\r\n\r\nfunction setCanvasSize() {\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight/2;\r\n    camera.viewportWidth = canvas.width;\r\n    camera.viewportHeight = canvas.height;\r\n}\r\n\r\nfunction webGLStart() {\r\n    canvas.id = \"ICG-canvas\"\r\n    canvas.width  = 1280;\r\n    canvas.height = 720;\r\n    canvas.style.backgroundColor = \"#0078D4\"\r\n    canvas.style.top = '0'\r\n    canvas.style.left = '0'\r\n    canvas.style.position = 'fixed'\r\n    initGL(canvas);\r\n    initGlobalVariables();\r\n    setCanvasSize();\r\n    \r\n    camera.setPos(0 , 0, 30);\r\n    \r\n    var l = new PhongLight().setDiffuse(.9, .2, .2).setAttenuation(300);\r\n    l.setPos(-15, 10, 0);\r\n    lights.push(l);\r\n    \r\n    l = new PhongLight().setAmbient(.1, .1, .1).setDiffuse(.9, .9, .9).setSpecular(.5, .5, .5).setAttenuation(100);\r\n    l.setPos(0, 25, 0);\r\n    lights.push(l);\r\n\r\n    l = new PhongLight().setAmbient(0, 0, 0).setDiffuse(.5, .5, .5).setSpecular(.0, .0, .0).setAttenuation(500);\r\n    l.setPos(0, 50, 50);\r\n    lights.push(l); \r\n    \r\n    shadow = new Shadow(lights[0]);\r\n    shadow_shader = new BasicShader('shadow');\r\n\r\n    shader_programs[\"phong\"] = new BasicShader('phong');\r\n    shader_programs[\"goraud\"] = new BasicShader('goraud');\r\n    shader_programs[\"flat\"] = new BasicShader('flat');\r\n    shader_programs[\"cel\"] = new BasicShader('cel');\r\n    shader_programs[\"custom\"] = new BasicShader('custom');\r\n\r\n    scene_objects[\"plane\"] = new ModelObject(\r\n        shader_programs[\"custom\"], 'plane', 'debug.png')\r\n        .setScale(100).setPos(0, -10, 0).setRot(0, 0, 0).setGloss(16);\r\n    scene_objects[\"easter\"] = new ModelObject(shader_programs[\"flat\"], 'Easter')\r\n        .setScale(10).setRot(-90, 0, 0).setPos(-15, 0, 0).setGloss(4);\r\n    scene_objects[\"easter2\"] = new ModelObject(shader_programs[\"phong\"], 'Easter')\r\n        .setScale(10).setRot(-90, -0, 0).setPos(15, 0, 0).setGloss(64);\r\n    scene_objects[\"teapot\"] = new ModelObject(\r\n        shader_programs[\"custom\"], 'Teapot', 'debug_yellow.png')\r\n        .setScale(0.5).setGloss(32);\r\n    // scene_objects[\"kangaroo\"] = new ModelObject(shader_programs[\"phong\"], 'Kangaroo').setScale(20).setRot(-90, 0, 0).setPos(20, 10, 0);\r\n\r\n    var vm = createApp(SceneObjectListComponent)\r\n    vm.mount('#app')\r\n    \r\n    gl.clearColor(0.5, 0.5, 0.5, 1.0);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    \r\n    document.body.appendChild(canvas)\r\n    tick();\r\n}\r\n\r\n\r\nfunction initGL(canvas: HTMLCanvasElement) {\r\n    try {\r\n        global.gl = <WebGLRenderingContext> canvas.getContext(\"webgl\") || <WebGLRenderingContext> canvas.getContext(\"experimental-webgl\");\r\n        if(!gl.getExtension('OES_standard_derivatives')){\r\n            throw('OES std extension not supported!')\r\n        }\r\n        if(!gl.getExtension('WEBGL_depth_texture')){\r\n            throw('Depth texture extension not supported!')\r\n        }\r\n        if(!gl.getExtension('EXT_frag_depth')){\r\n            throw('Depth texture extension not supported!')\r\n        }\r\n    } \r\n    catch (e) {\r\n    }\r\n    if (!gl) {\r\n        alert(\"Could not initialise WebGL, sorry :-(\");\r\n    }\r\n}\r\n\r\nfunction tick() {\r\n    // window.requestAnimationFrame(tick);\r\n    window.requestAnimFrame(tick);\r\n    update();\r\n    \r\n    // depth maps\r\n    // shadow.view.setMVP();\r\n    drawShadow(shadow, shadow_shader);\r\n    let mat = shadow.getMatrix();\r\n    // let mat = mat4.create();\r\n    Object.entries(shader_programs).forEach(\r\n        ([, prog]) => {\r\n            prog.setDepthMatrixUniforms(shadow.depthTextureSize, mat, shadow.depthTexture);\r\n        }\r\n    );\r\n    // rendering\r\n    // draw(shadow.view);\r\n    draw();\r\n    updateTime();\r\n}\r\n\r\n\r\nfunction update() {\r\n    teapotAngle += degToRad(0.03) * elapsed_time;\r\n    // scene_objects['teapot'].rotateY(degToRad(0.05) * elapsed_time); \r\n    // scene_objects['easter'].rotateZ(degToRad(0.05) * elapsed_time); \r\n    // scene_objects['kangaroo'].rotateZ(degToRad(0.01) * elapsed_time); \r\n    lights[0].setPos(30*Math.cos(teapotAngle), lights[0].position[1], 30*Math.sin(teapotAngle))\r\n    lights[1].setPos(0, lights[1].position[1], 100*Math.cos(teapotAngle*2))\r\n    // scene_objects['teapot'].translate(0, 0, -.01 * elapsed_time);\r\n    // camera.rotateY(degToRad(0.05) * elapsed_time);\r\n}\r\n\r\nfunction draw(\r\n    view: Camera = camera,\r\n    shaders:{ [name: string]: BasicShader } | BasicShader[] = shader_programs,\r\n    )\r\n{\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.disable(gl.CULL_FACE);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.viewport(0, 0, view.viewportWidth, view.viewportHeight);\r\n    \r\n    let world_mat = view.setMVP();\r\n    Object.entries(shaders).forEach(\r\n        ([, prog]) => {\r\n            prog.setWorldMatrixUniforms(world_mat);\r\n            prog.setLightUniforms(lights);\r\n            prog.setCamPosUniform(view.position);\r\n        }\r\n    );\r\n    Object.entries(scene_objects).forEach(\r\n        ([, obj]) => obj.draw()\r\n    );\r\n}\r\n\r\nfunction drawShadow(\r\n    shadow: Shadow, shader: BasicShader\r\n    )\r\n{\r\n    shadow.setFrameBuffer();\r\n    var view = shadow.view;\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.viewport(0, 0, view.viewportWidth, view.viewportHeight);\r\n    \r\n    shadow.setPosRot();\r\n    var world_mat = view.setMVP();\r\n    shader.setWorldMatrixUniforms(world_mat);\r\n    shader.setLightUniforms(lights);\r\n    shader.setCamPosUniform(view.position);\r\n    Object.entries(scene_objects).forEach(\r\n        ([, obj]) => {\r\n            // let s = obj.shaderProgram;\r\n            // obj.shaderProgram = shader;\r\n            \r\n            obj.draw(shader)\r\n            // obj.shaderProgram = s;\r\n        }\r\n    );\r\n}\r\n\r\n\r\nfunction updateTime() {\r\n    var timeNow = new Date().getTime();\r\n    if (lastTime != 0) {\r\n        elapsed_time = timeNow - lastTime;\r\n    }\r\n    lastTime = timeNow;\r\n}","<template>\r\n    <div class=\"panel\">\r\n        <div>\r\n            <select v-model=\"selected\" style=\"font-size:24px\" size=10>\r\n                <option :value=\"selected_default\" selected>No object selected</option>\r\n                <!-- <option :value=\"obj[0]\" selected>No object selected</option> -->\r\n                <option v-for=\"o in obj\" :key=o :value=o> {{o.name}} </option>\r\n            </select>\r\n        </div>\r\n\r\n        <div>\r\n            <!-- <p v-if=\"is_selected\"> {{selected.name}}: {{selected.object.position}} </p> -->\r\n            <div v-if=\"is_selected\"> <object-component :obj=selected></object-component>  </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script lang=\"ts\">\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { ObjectAttribute, ModelObject } from '../ts/modelObject'\r\nimport ObjectComponent from './ObjectComponent.vue'\r\n\r\ndeclare let scene_objects: { [name: string]: ModelObject }\r\n\r\n@Options({\r\n    components: {ObjectComponent}\r\n})\r\nexport default class SceneObjectListComponent extends Vue {\r\n    obj: ObjectAttribute[] = []\r\n    selected_default: ObjectAttribute = { name: \"null\", object: null };\r\n    selected: ObjectAttribute = this.selected_default;\r\n\r\n    beforeMount() {\r\n        this.obj = [];\r\n        Object.entries(scene_objects).forEach(\r\n            ([name, obj]) => {\r\n                this.obj.push({\r\n                    name: name,\r\n                    object: obj\r\n                });\r\n            }\r\n        );\r\n    }\r\n    \r\n    get is_selected(): boolean {\r\n        return this.selected.object instanceof ModelObject\r\n    }\r\n\r\n    \r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.panel {\r\n    position: fixed;\r\n    top: 50%;\r\n    font-family: Avenir, Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    /* -moz-osx-font-smoothing: grayscale; */\r\n    /* float:inline-end; */\r\n    text-align: left;\r\n    /* right: 500px; */\r\n    /* color: #2c3e50; */\r\n    margin-top: 10px;\r\n    width: 100%;\r\n    height: 50%;\r\n    font-size: 18px;\r\n    display: flex;\r\n}\r\n\r\n</style>\r\n","<template>\r\n    <div class=\"object-component\">\r\n        <h4> Object: {{obj.name}} </h4>\r\n\r\n        <p class=\"array\"> Position </p>\r\n        <div v-for=\"(val, index) in pos\" :key=index class=\"array\">\r\n            {{xyz(index)}}\r\n            <input v-model.number=\"pos[index]\" class=\"input\">\r\n        </div>\r\n        <br/>\r\n\r\n        <p class=\"array\"> Rotation </p>\r\n        <div v-for=\"(val, index) in rot\" :key=index class=\"array\">\r\n            {{xyz(index)}}\r\n            <input v-model.number=\"euler[index]\" @keyup.enter=\"rot_changed\" class=\"input\">\r\n        </div>\r\n        <br/>\r\n\r\n        <p class=\"array\"> Shear </p>\r\n        <div v-for=\"(val, index) in shear\" :key=index class=\"array\">\r\n            {{index}}\r\n            <input v-model.number=\"shear[index]\" class=\"input\">\r\n        </div>\r\n        <br/>\r\n\r\n        <p class=\"array\"> Shader </p>\r\n        <select v-model=\"selected_shader\" style=\"font-size:24px\" class=\"array\">\r\n            <option v-for=\"(_, name) in shader_programs\" :key=name :value=name> {{name}} </option>\r\n        </select>\r\n        <p class=\"array\"> Gloss <input v-model.number=\"gloss\" class=\"input\"> </p>\r\n\r\n        <p v-if=\"is_texture\" class=\"array\"> Texture </p>\r\n        <select v-if=\"is_texture\" v-model=\"selected_texture\" style=\"font-size:24px\" class=\"array\">\r\n            <option v-for=\"(name, ) in texture_list\" :key=name :value=name> {{name}} </option>\r\n        </select>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script lang=\"ts\">\r\nimport component from '*.vue';\r\nimport { Options, Vue, prop } from 'vue-class-component'\r\nimport { vec3, quat } from 'gl-matrix'\r\n\r\nimport { ModelObject, ObjectAttribute } from '../ts/modelObject'\r\nimport { getEuler } from '../ts/transform'\r\nimport { BasicShader } from '../ts/shaderProgram'\r\n\r\n\r\ndeclare let shader_programs: { [name: string]: BasicShader };\r\ndeclare var texture_list: string[];\r\n\r\n\r\nclass Props {\r\n    obj!: ObjectAttribute\r\n}\r\n\r\nexport default class ObjectComponent extends Vue.with(Props) {\r\n\r\n    euler: Array<number>\r\n    shader_programs = shader_programs;\r\n    texture_list = texture_list;\r\n\r\n    get is_texture() {  return this.obj.object.textures !== undefined }\r\n    get selected_texture() {\r\n        if(this.obj.object.textures === undefined){\r\n            return 'none';\r\n        }\r\n        return this.obj.object.textures.name; \r\n    }\r\n    set selected_texture(name) { this.obj.object.loadTexture(name); }\r\n\r\n    get selected_shader() { return this.obj.object.shaderProgram.name; }\r\n    set selected_shader(name) { this.obj.object.shaderProgram = shader_programs[name]; }\r\n\r\n    get gloss() { return this.obj.object.gloss; }\r\n    set gloss(val: number) { this.obj.object.gloss = val; }\r\n\r\n    get pos(){ return this.obj.object.position.valueOf() as Array<number>; }\r\n    \r\n    get shear(){ return this.obj.object.shear.valueOf() as Array<number>; }\r\n\r\n    get rot(){\r\n        this.euler = []\r\n        getEuler(this.euler, this.obj.object.rotation);\r\n        return this.euler;\r\n    }\r\n\r\n    rot_changed(){\r\n        this.obj.object.rotation = quat.fromEuler(quat.create(), this.euler[0], this.euler[1], this.euler[2]);\r\n    }\r\n\r\n    xyz(index){ return \"XYZ\"[index]; }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.object-component {\r\n    position:inherit;\r\n    /* top: 55%; */\r\n    /* right: 50%; */\r\n    /* left: 50%; */\r\n    font-family: Avenir, Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    /* float: right; */\r\n    text-align: left;\r\n    font-size: 24px;\r\n    line-break: strict;\r\n    line-height: 0%;\r\n}\r\n\r\n.array {\r\n    display: inline-block;\r\n    padding: 0px 5px;\r\n}\r\n\r\n.input {\r\n    font-size: 18px;\r\n    width: 60px;\r\n}\r\n</style>\r\n","\r\nimport component from '*.vue';\r\nimport { Options, Vue, prop } from 'vue-class-component'\r\nimport { vec3, quat } from 'gl-matrix'\r\n\r\nimport { ModelObject, ObjectAttribute } from '../ts/modelObject'\r\nimport { getEuler } from '../ts/transform'\r\nimport { BasicShader } from '../ts/shaderProgram'\r\n\r\n\r\ndeclare let shader_programs: { [name: string]: BasicShader };\r\ndeclare var texture_list: string[];\r\n\r\n\r\nclass Props {\r\n    obj!: ObjectAttribute\r\n}\r\n\r\nexport default class ObjectComponent extends Vue.with(Props) {\r\n\r\n    euler: Array<number>\r\n    shader_programs = shader_programs;\r\n    texture_list = texture_list;\r\n\r\n    get is_texture() {  return this.obj.object.textures !== undefined }\r\n    get selected_texture() {\r\n        if(this.obj.object.textures === undefined){\r\n            return 'none';\r\n        }\r\n        return this.obj.object.textures.name; \r\n    }\r\n    set selected_texture(name) { this.obj.object.loadTexture(name); }\r\n\r\n    get selected_shader() { return this.obj.object.shaderProgram.name; }\r\n    set selected_shader(name) { this.obj.object.shaderProgram = shader_programs[name]; }\r\n\r\n    get gloss() { return this.obj.object.gloss; }\r\n    set gloss(val: number) { this.obj.object.gloss = val; }\r\n\r\n    get pos(){ return this.obj.object.position.valueOf() as Array<number>; }\r\n    \r\n    get shear(){ return this.obj.object.shear.valueOf() as Array<number>; }\r\n\r\n    get rot(){\r\n        this.euler = []\r\n        getEuler(this.euler, this.obj.object.rotation);\r\n        return this.euler;\r\n    }\r\n\r\n    rot_changed(){\r\n        this.obj.object.rotation = quat.fromEuler(quat.create(), this.euler[0], this.euler[1], this.euler[2]);\r\n    }\r\n\r\n    xyz(index){ return \"XYZ\"[index]; }\r\n}\r\n\r\n","import { render } from \"./ObjectComponent.vue?vue&type=template&id=a96d9380\"\nimport script from \"./ObjectComponent.vue?vue&type=script&lang=ts\"\nexport * from \"./ObjectComponent.vue?vue&type=script&lang=ts\"\n\nimport \"./ObjectComponent.vue?vue&type=style&index=0&id=a96d9380&lang=css\"\nscript.render = render\n\nexport default script","\r\nimport { Options, Vue } from 'vue-class-component'\r\nimport { ObjectAttribute, ModelObject } from '../ts/modelObject'\r\nimport ObjectComponent from './ObjectComponent.vue'\r\n\r\ndeclare let scene_objects: { [name: string]: ModelObject }\r\n\r\n@Options({\r\n    components: {ObjectComponent}\r\n})\r\nexport default class SceneObjectListComponent extends Vue {\r\n    obj: ObjectAttribute[] = []\r\n    selected_default: ObjectAttribute = { name: \"null\", object: null };\r\n    selected: ObjectAttribute = this.selected_default;\r\n\r\n    beforeMount() {\r\n        this.obj = [];\r\n        Object.entries(scene_objects).forEach(\r\n            ([name, obj]) => {\r\n                this.obj.push({\r\n                    name: name,\r\n                    object: obj\r\n                });\r\n            }\r\n        );\r\n    }\r\n    \r\n    get is_selected(): boolean {\r\n        return this.selected.object instanceof ModelObject\r\n    }\r\n\r\n    \r\n}\r\n\r\n","import { render } from \"./SceneObjectList.vue?vue&type=template&id=d766ded8\"\nimport script from \"./SceneObjectList.vue?vue&type=script&lang=ts\"\nexport * from \"./SceneObjectList.vue?vue&type=script&lang=ts\"\n\nimport \"./SceneObjectList.vue?vue&type=style&index=0&id=d766ded8&lang=css\"\nscript.render = render\n\nexport default script","export default \"precision highp float;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\n\\r\\nstruct Light {\\r\\n    bool enabled;\\r\\n    vec3 position;\\r\\n    vec3 la; // Ambient\\r\\n    vec3 ld; // Diffuse\\r\\n    vec3 ls; // Specular\\r\\n    float attenuation;\\r\\n\\r\\n};\\r\\n\\r\\n\\r\\nuniform float gloss;\\r\\nuniform Light lights[4];\\r\\nuniform vec3 uCamPos;\\r\\n\\r\\nvoid main(void) {\\r\\n    gl_FragColor = vec4(0, 0, 0, 1);\\r\\n    vec3 color = fragcolor;\\r\\n    // vec3 camPos = uCamPos;\\r\\n    vec3 normal = normalize(vNormal);\\r\\n    vec3 viewDir = normalize(uCamPos - pos);\\r\\n    vec3 light_color = vec3(0);\\r\\n    vec3 spec_color = vec3(0);\\r\\n    for(int i = 0; i < 4; ++i){\\r\\n        if(!lights[i].enabled){\\r\\n            break;\\r\\n        }\\r\\n        vec3 lightDir = (lights[i].position - pos);\\r\\n        float atten = distance(lightDir, vec3(0));\\r\\n        atten = pow(max(.1, lights[i].attenuation-atten)/lights[i].attenuation, 2.);\\r\\n        lightDir = normalize(lightDir);\\r\\n\\r\\n        float dif = dot(normal, lightDir)*atten;\\r\\n        light_color += (lights[i].la + dif * lights[i].ld);\\r\\n        \\r\\n        vec3 halfDir = normalize(viewDir + lightDir);\\r\\n        float spec = pow(max(dot(normal, halfDir), 0.), gloss)*atten;\\r\\n        spec_color += (lights[i].ls * spec);\\r\\n    }\\r\\n    gl_FragColor.rgb = light_color * color + spec_color;\\r\\n}\"","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SceneObjectList.vue?vue&type=style&index=0&id=d766ded8&lang=css\"","export default \"attribute vec3 aVertexPosition;\\r\\nattribute vec3 aFrontColor;\\r\\nattribute vec3 aNormal;\\r\\n\\r\\nuniform mat4 uModelMatrix;\\r\\nuniform mat4 uMVMatrix;\\r\\nuniform mat4 uPMatrix;\\r\\nuniform mat4 uinvTMVMatrix;\\r\\nuniform mat4 uinvTModelMatrix;\\r\\n\\r\\nvarying vec3 fragcolor;\\r\\nvarying vec3 vNormal;\\r\\nvarying vec3 pos;\\r\\n\\r\\nmat4 transpose(mat4 inMatrix) { \\r\\n    vec4 i0 = inMatrix[0]; \\r\\n    vec4 i1 = inMatrix[1]; \\r\\n    vec4 i2 = inMatrix[2]; \\r\\n    vec4 i3 = inMatrix[3]; \\r\\n\\r\\n    mat4 outMatrix = mat4(\\r\\n       vec4(i0.x, i1.x, i2.x, i3.x), \\r\\n       vec4(i0.y, i1.y, i2.y, i3.y), \\r\\n       vec4(i0.z, i1.z, i2.z, i3.z), \\r\\n       vec4(i0.w, i1.w, i2.w, i3.w) \\r\\n       ); \\r\\n\\r\\n    return outMatrix; \\r\\n} \\r\\n\\r\\nvoid main(void) {\\r\\n    fragcolor = aFrontColor;\\r\\n    // pos = aVertexPosition;\\r\\n    pos = (uModelMatrix * vec4(aVertexPosition, 1)).xyz;\\r\\n    // normal = normalize(aNormal);\\r\\n    vNormal = ((uinvTModelMatrix * vec4(aNormal, 0.0)).xyz);\\r\\n\\r\\n    gl_Position = uPMatrix * uMVMatrix * vec4(pos, 1.0);\\r\\n}\"","var map = {\n\t\"./cel.frag\": \"a036\",\n\t\"./custom.frag\": \"b44e\",\n\t\"./flat.frag\": \"a4e4\",\n\t\"./goraud.frag\": \"3444\",\n\t\"./phong.frag\": \"ee5e\",\n\t\"./shadow.frag\": \"73bd\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"fefc\";"],"sourceRoot":""}