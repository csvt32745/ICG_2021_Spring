<html>

<head>
<title>ICG WebGL &mdash; HW1</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<script id="fragmentShader" type="fragment">
    precision mediump float;

    varying vec4 fragcolor;
    varying vec3 normal;
    varying vec3 pos;


    void main(void) {
        vec3 lightPos = vec3(-50, 10, 0);
        vec3 lightCor = vec3(0.5, .5, .5);
        vec3 dir = normalize(lightPos - pos);
        //dir = normalize(vec3(0, 1, 1));


        float dif = dot(normalize(normal), dir);
        dif = (dif<.0)? .0 : (dif>1.)? 1. : dif;

        gl_FragColor = vec4(.5, 0, 0, 1);
        gl_FragColor.rgb *= 0.4;
        gl_FragColor.rgb += lightCor * dif;
    }
</script>

<!-- 
    TODO HERE:
    modify vertex shader or write another one
    to implement flat, gouraud and phong shading

    NOTE:
    if you want to write bonus part (texture mapping),
    only Teapot.json has extra attribute "vertexTextureCoords"
    which is used for texture mappping.
 -->
<script id="vertexShader" type="vertex">
    attribute vec3 aVertexPosition;
    attribute vec3 aFrontColor;
    attribute vec3 aNormal;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;
    uniform mat4 uinvTMVMatrix;

	varying vec4 fragcolor;
    varying vec3 normal;
    varying vec3 pos;

    void main(void) {
        fragcolor = vec4(aFrontColor.rgb, 1.0);
        pos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        
        //normal = (uMVMatrix * vec4(aNormal, 0.0)).xyz;
        normal = (uinvTMVMatrix * vec4(aNormal, 0.0)).xyz;
        //normal = aNormal;
    }
</script>

<script type="text/javascript" src="bundle.js"></script>

</head>


</html>