(()=>{var r={773:()=>{var r;WebGLUtils={create3DContext:r=function(r,t){for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null,o=0;o<e.length;++o){try{i=r.getContext(e[o],t)}catch(r){}if(i)break}return i},setupWebGL:function(t,e,i){i=i||function(r){var e=t.parentNode;if(e){var i=window.WebGLRenderingContext?'It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>':'This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>';r&&(i+="<br/><br/>Status: "+r),e.innerHTML=function(r){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+r+"</div></div></td></tr></table>"}(i)}},t.addEventListener&&t.addEventListener("webglcontextcreationerror",(function(r){i(r.statusMessage)}),!1);var o=r(t,e);return o||window.WebGLRenderingContext||i(""),o}},window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r,t){window.setTimeout(r,1e3/60)}},226:(r,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>i});const i="precision mediump float;\r\n\r\nvarying vec4 fragcolor;\r\nvarying vec3 normal;\r\nvarying vec3 pos;\r\n\r\n\r\nvoid main(void) {\r\n    vec3 viewDir = normalize(vec3(0, 0, 50));\r\n\r\n    if(abs(dot(viewDir, normal)) < 0.45){\r\n        gl_FragColor = vec4(0, 0, 0, 1);\r\n        return;\r\n    }\r\n\r\n    vec3 lightPos = vec3(50, 50, 20);\r\n    vec3 dir = normalize(lightPos - pos);\r\n    vec3 lightCor = vec3(0.5, .5, .5);\r\n    float lightIntensity = 1.;\r\n    //dir = normalize(vec3(0, 1, 1));\r\n\r\n\r\n    float dif = dot(normalize(normal), dir);\r\n    if(dif > .6) dif = 0.8;\r\n    else if(dif > .25) dif = .3;\r\n    \r\n\r\n    gl_FragColor = vec4(.5, .0, .0, 1);\r\n    // gl_FragColor.rgb *= 0.4;\r\n    gl_FragColor.rgb += lightCor * dif * lightIntensity;\r\n    vec3 halfDir = normalize(viewDir + dir);\r\n    float _spec = 1.;\r\n    float _gloss = 10.;\r\n    float spec = _spec * pow(clamp(dot(normal, halfDir), 0., 1.),  _gloss);\r\n    spec = step(0.7, spec);\r\n    gl_FragColor.rgb += lightCor*spec;\r\n}"},342:(r,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>i});const i="attribute vec3 aVertexPosition;\r\nattribute vec3 aFrontColor;\r\nattribute vec3 aNormal;\r\n\r\nuniform mat4 uMVMatrix;\r\nuniform mat4 uPMatrix;\r\nuniform mat4 uinvTMVMatrix;\r\n\r\nvarying vec4 fragcolor;\r\nvarying vec3 normal;\r\nvarying vec3 pos;\r\n\r\nvoid main(void) {\r\n    fragcolor = vec4(aFrontColor.rgb, 1.0);\r\n    pos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\r\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\r\n    \r\n    normal = (uinvTMVMatrix * vec4(aNormal, 0.0)).xyz;\r\n}"},706:(r,t,e)=>{var i={"./v.frag":226};function o(r){var t=n(r);return e(t)}function n(r){if(!e.o(i,r)){var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}return i[r]}o.keys=function(){return Object.keys(i)},o.resolve=n,r.exports=o,o.id=706},557:(r,t,e)=>{var i={"./v.vert":342};function o(r){var t=n(r);return e(t)}function n(r){if(!e.o(i,r)){var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}return i[r]}o.keys=function(){return Object.keys(i)},o.resolve=n,r.exports=o,o.id=557}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return r[i](n,n.exports,e),n.exports}e.d=(r,t)=>{for(var i in t)e.o(t,i)&&!e.o(r,i)&&Object.defineProperty(r,i,{enumerable:!0,get:t[i]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),e.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),e.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},(()=>{"use strict";var r=1e-6,t="undefined"!=typeof Float32Array?Float32Array:Array;function i(){var r=new t(16);return t!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function o(){var r=new t(3);return t!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n(r,e,i){var o=new t(3);return o[0]=r,o[1]=e,o[2]=i,o}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});function a(){var r=new t(4);return t!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}o(),e(773),function(){var r;r=new t(4),t!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var l;o(),n(1,0,0),n(0,1,0),a(),a(),l=new t(9),t!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,WebGLBuffer;class s{constructor(r,t,e){this.position=o(),this.rotation=a(),this.isLoaded=!1,this.position=r,this.shaderProgram=t,void 0!==e&&this.loadModel(e)}loadModel(r){var t=new XMLHttpRequest;t.open("GET",`./model/${r}.json`),t.onreadystatechange=()=>{4==t.readyState&&(this.vertexAttributes=JSON.parse(t.responseText),console.log(this.vertexAttributes),this.handleModelData())},t.send()}handleModelData(){this.vertexBuffers={};for(let t in this.vertexAttributes)if(void 0!==t&&"vertexTextureCoords"!==t){var r=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,r),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.vertexAttributes[t]),gl.STATIC_DRAW),r.itemSize=3,r.numItems=this.vertexAttributes[t].length/3,console.log(r),this.vertexBuffers[t]=r}this.isLoaded=!0}draw(){gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffers.vertexPositions),gl.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.vertexBuffers.vertexPositions.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffers.vertexFrontcolors),gl.vertexAttribPointer(this.shaderProgram.vertexFrontColorAttribute,this.vertexBuffers.vertexFrontcolors.itemSize,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffers.vertexNormals),gl.vertexAttribPointer(this.shaderProgram.vertexNormalAttribute,this.vertexBuffers.vertexNormals.itemSize,gl.FLOAT,!1,0,0),gl.drawArrays(gl.TRIANGLES,0,this.vertexBuffers.vertexPositions.numItems)}}class g{constructor(r){this.getShader(r),this.initShaders()}getShader(r){var t=gl.createShader(gl.VERTEX_SHADER),i=e(557)(`./${r}.vert`).default;gl.shaderSource(t,i),gl.compileShader(t);var o=gl.createShader(gl.FRAGMENT_SHADER);return i=e(706)(`./${r}.frag`).default,gl.shaderSource(o,i),gl.compileShader(o),gl.getShaderParameter(t,gl.COMPILE_STATUS)?gl.getShaderParameter(o,gl.COMPILE_STATUS)?(this.shaderProgram=gl.createProgram(),gl.attachShader(this.shaderProgram,t),gl.attachShader(this.shaderProgram,o),gl.linkProgram(this.shaderProgram),void(gl.getProgramParameter(this.shaderProgram,gl.LINK_STATUS)||alert("Could not initialise shaders"))):(alert(gl.getShaderInfoLog(o)),null):(alert(gl.getShaderInfoLog(t)),null)}initShaders(){gl.useProgram(this.shaderProgram),this.vertexPositionAttribute=gl.getAttribLocation(this.shaderProgram,"aVertexPosition"),gl.enableVertexAttribArray(this.vertexPositionAttribute),this.vertexFrontColorAttribute=gl.getAttribLocation(this.shaderProgram,"aFrontColor"),gl.enableVertexAttribArray(this.vertexFrontColorAttribute),this.vertexNormalAttribute=gl.getAttribLocation(this.shaderProgram,"aNormal"),gl.enableVertexAttribArray(this.vertexNormalAttribute),this.pMatrixUniform=gl.getUniformLocation(this.shaderProgram,"uPMatrix"),this.mvMatrixUniform=gl.getUniformLocation(this.shaderProgram,"uMVMatrix"),this.invT_mvMatrixUniform=gl.getUniformLocation(this.shaderProgram,"uinvTMVMatrix")}setMatrixUniforms(r,t,e){gl.uniformMatrix4fv(this.pMatrixUniform,!1,r),gl.uniformMatrix4fv(this.mvMatrixUniform,!1,t),gl.uniformMatrix4fv(this.invT_mvMatrixUniform,!1,e)}}window.onload=()=>{return(r=document.createElement("canvas")).id="ICG-canvas",r.style.backgroundColor="#0078D4",r.width=1280,r.height=720,function(r){try{e.g.gl=r.getContext("webgl")||r.getContext("experimental-webgl"),u=new x({width:r.width,height:r.height})}catch(r){}gl||alert("Could not initialise WebGL, sorry :-(")}(r),h=new g("v"),d=new s(n(0,0,0),h,"Teapot"),gl.clearColor(.5,.5,.5,1),gl.enable(gl.DEPTH_TEST),document.body.appendChild(r),void w();var r};var d,h,u,v=i(),c=i(),f=i(),m=20,b=0;class x{constructor(r){this.viewportWidth=r.width,this.viewportHeight=r.height}}function w(){var t;window.requestAnimFrame(w),gl.viewport(0,0,u.viewportWidth,u.viewportHeight),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),d.isLoaded&&(function(r,t,e,i,o){var n,a=1/Math.tan(22.5);r[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,n=1/-99.9,r[10]=100.1*n,r[14]=20*n}(c,0,u.viewportWidth/u.viewportHeight),function(r){r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1}(v),function(r,t,e){var i,o,n,a,l,s,g,d,h,u,v,c,f=e[0],m=e[1],b=e[2];t===r?(r[12]=t[0]*f+t[4]*m+t[8]*b+t[12],r[13]=t[1]*f+t[5]*m+t[9]*b+t[13],r[14]=t[2]*f+t[6]*m+t[10]*b+t[14],r[15]=t[3]*f+t[7]*m+t[11]*b+t[15]):(i=t[0],o=t[1],n=t[2],a=t[3],l=t[4],s=t[5],g=t[6],d=t[7],h=t[8],u=t[9],v=t[10],c=t[11],r[0]=i,r[1]=o,r[2]=n,r[3]=a,r[4]=l,r[5]=s,r[6]=g,r[7]=d,r[8]=h,r[9]=u,r[10]=v,r[11]=c,r[12]=i*f+l*m+h*b+t[12],r[13]=o*f+s*m+u*b+t[13],r[14]=n*f+g*m+v*b+t[14],r[15]=a*f+d*m+c*b+t[15])}(v,v,[0,0,-35]),function(t,e,i,o){var n,a,l,s,g,d,h,u,v,c,f,m,b,x,w,p,A,y,M,P,F,S,T,C,_=o[0],L=o[1],R=o[2],E=Math.hypot(_,L,R);E<r||(_*=E=1/E,L*=E,R*=E,n=Math.sin(i),l=1-(a=Math.cos(i)),s=e[0],g=e[1],d=e[2],h=e[3],u=e[4],v=e[5],c=e[6],f=e[7],m=e[8],b=e[9],x=e[10],w=e[11],p=_*_*l+a,A=L*_*l+R*n,y=R*_*l-L*n,M=_*L*l-R*n,P=L*L*l+a,F=R*L*l+_*n,S=_*R*l+L*n,T=L*R*l-_*n,C=R*R*l+a,t[0]=s*p+u*A+m*y,t[1]=g*p+v*A+b*y,t[2]=d*p+c*A+x*y,t[3]=h*p+f*A+w*y,t[4]=s*M+u*P+m*F,t[5]=g*M+v*P+b*F,t[6]=d*M+c*P+x*F,t[7]=h*M+f*P+w*F,t[8]=s*S+u*T+m*C,t[9]=g*S+v*T+b*C,t[10]=d*S+c*T+x*C,t[11]=h*S+f*T+w*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(v,v,m*Math.PI/180,[0,1,0]),function(r,t){var e=t[0],i=t[1],o=t[2],n=t[3],a=t[4],l=t[5],s=t[6],g=t[7],d=t[8],h=t[9],u=t[10],v=t[11],c=t[12],f=t[13],m=t[14],b=t[15],x=e*l-i*a,w=e*s-o*a,p=e*g-n*a,A=i*s-o*l,y=i*g-n*l,M=o*g-n*s,P=d*f-h*c,F=d*m-u*c,S=d*b-v*c,T=h*m-u*f,C=h*b-v*f,_=u*b-v*m,L=x*_-w*C+p*T+A*S-y*F+M*P;L&&(L=1/L,r[0]=(l*_-s*C+g*T)*L,r[1]=(o*C-i*_-n*T)*L,r[2]=(f*M-m*y+b*A)*L,r[3]=(u*y-h*M-v*A)*L,r[4]=(s*S-a*_-g*F)*L,r[5]=(e*_-o*S+n*F)*L,r[6]=(m*p-c*M-b*w)*L,r[7]=(d*M-u*p+v*w)*L,r[8]=(a*C-l*S+g*P)*L,r[9]=(i*S-e*C-n*P)*L,r[10]=(c*y-f*p+b*x)*L,r[11]=(h*p-d*y-v*x)*L,r[12]=(l*F-a*T-s*P)*L,r[13]=(e*T-i*F+o*P)*L,r[14]=(f*w-c*A-m*x)*L,r[15]=(d*A-h*w+u*x)*L)}(f,v),function(r,t){if(r===t){var e=t[1],i=t[2],o=t[3],n=t[6],a=t[7],l=t[11];r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=e,r[6]=t[9],r[7]=t[13],r[8]=i,r[9]=n,r[11]=t[14],r[12]=o,r[13]=a,r[14]=l}else r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15]}(f,f),d.draw(),h.setMatrixUniforms(c,v,f)),t=(new Date).getTime(),0!=b&&(m+=.05*(t-b)),b=t}})()})();